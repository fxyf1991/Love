<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<style type="text/css">
		@font-face {
			font-family: digit;
			src: url('digital-7_mono.ttf') format("truetype");
		}

		@font-face {
			font-family: Delius Swash Caps;
			src: url('fangzheng.ttf') format("truetype");
		}

		@font-face {
			font-family: Great Vibes;
			src: url('GreatVibes-Regular.ttf') format("truetype");
		}
	</style>

	<link href="css/default.css" type="text/css" rel="stylesheet">
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="js/garden.js"></script>
	<script type="text/javascript" src="js/functions.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
	/>
	<meta name="applicable-device" content="pc,mobile" />
</head>

<body>
	<div id="buttonWrapper">
		<button id="buttonPlay"></button>
	</div>









	<audio id="bgm" autoplay="autoplay" loop="loop" preload="auto" src="res/Josh Vietti - Where Is the Love-L.mp3">不支持</audio>
	<div id="mainDiv">
		<div id="content">
			<div id="note">
				<span>
					<h2>嗨，古玲</h2>
					<p>今天是我们在一起的第一个情人节</p>
					<p>如果说遇见是一种缘分的话</p>
					<p>那么久别重逢就是注定的因缘际遇</p>
					<p>人生有太多的波澜起伏</p>
					<p>而此去今朝我却无需烦恼多虑</p>
					<p>只因我的世界有了你的存在</p>
					<p>今后的人生旅途，请务必握紧我的双手</p>
					<br>
					<p>情人节快乐</p>
					<br>
				</span>
			</div>
			<div id="loveHeart">
				<canvas id="garden"></canvas>
				<div id="words">
					<div id="messages">
						<div id='loveMessages-1'>Would you like to go through life with me?</div>
						<div id='loveMessages'></div>
						<button id="buttonYes">yes</button>
						<div id="elapseClock" class="hidden"></div>
					</div>
					<div id="love-u">

						<div id="signature" class="signature hidden">- Tao Lee</div>
					</div>
				</div>
			</div>
		</div>
		<!-- <div id="copyright">
			Inspired by <a href="http://www.openrise.com/lab/FlowerPower/">FlowerPower</a> project.<br />
            Copyright © 2011 <a href='http://hackerzhou.me'>hackerzhou.me</a> 2009-2011<br/>
            Copyright © 2017 <a href='https://github.com/ThomasWu994'>Thomas Wu</a> 2017
		</div> -->
	</div>
	<script type="text/javascript">
		var audio = document.getElementById('bgm');
		// $('html').one('click', function () {
		// 	audio.play();
		// });








		var offsetX = $("#loveHeart").width() / 2;
		var offsetY = $("#loveHeart").height() / 2 - 55;
		var together = new Date()
		together.setFullYear(2018, 01, 08);
		together.setHours(0);
		together.setMinutes(0);
		together.setSeconds(0);
		together.setMilliseconds(0);

		if (!document.createElement('canvas').getContext) {
			var msg = document.createElement("div");
			msg.id = "errorMsg";
			msg.innerHTML = "Your browser doesn't support HTML5!<br/>Recommend use Chrome 14+/IE 9+/Firefox 7+/Safari 4+";
			document.body.appendChild(msg);
			$("#note").css("display", "none")
			document.execCommand("stop");
		} else {
			$("#note").typewriter();
			if ($(window).width() < 767) {

				setTimeout(function () {
					$("#note").fadeOut(2000, function () {
						showHeart();
					})
				}, 35000);
			}
			else {
				$('#buttonPlay').hide()
				setTimeout(function () {
					startHeartAnimation();
				}, 2000);
			}


			//adjustCodePosition();
		}

		function showHeart() {
			$("#loveHeart").fadeIn(1000, function () {
				startHeartAnimation();
			});
		}

		$('#buttonYes').click(function () {
			$('#buttonYes').hide()
			$('#loveMessages-1').hide()
			$("#elapseClock").show(1000);
			$("#signature").show(1000);
			$("#loveMessages").text('I am in love with you for').css("font-size", "30px")


			timeElapse(together);
			setInterval(function () {
				timeElapse(together);
			}, 200);
		});







		document.addEventListener('DOMContentLoaded', function () {
			$('#buttonPlay').click((e) => {
				let button = e.currentTarget
				$(button).toggleClass('active')
				if ($(button).hasClass('active')) {
					audio.play()
				} else {
					audio.pause()
				}
			})
		});




	</script>
</body>

</html>